<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>makerwei blog</title>
  <subtitle>Android Python Developer</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://blog.makerwei.me/"/>
  <updated>2016-11-26T14:00:28.000Z</updated>
  <id>http://blog.makerwei.me/</id>
  
  <author>
    <name>小小小maker_wei</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>spring_mysql</title>
    <link href="http://blog.makerwei.me/2016/11/26/spring-mysql/"/>
    <id>http://blog.makerwei.me/2016/11/26/spring-mysql/</id>
    <published>2016-11-26T14:00:28.000Z</published>
    <updated>2016-11-26T14:00:28.000Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Android AsyncTask 使用总结</title>
    <link href="http://blog.makerwei.me/2016/02/26/task/"/>
    <id>http://blog.makerwei.me/2016/02/26/task/</id>
    <published>2016-02-26T10:39:19.000Z</published>
    <updated>2016-03-14T10:41:01.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="使用原因"><a href="#使用原因" class="headerlink" title="使用原因"></a>使用原因</h2><p>由于android UI主线程是不安全的，如果在子线程中进行更新UI的操作，就会抛出<code>android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views</code>的异常。而且UI主线程不能处理耗时的操作，例如访问网络或者查询数据库；一旦UI线程超过5s没有响应用户请求，就会出现ANR（“Application Not Responding”）错误。所以，在一些应用场景我们不得不采用android的异步消息处理机制。</p>
<h2 id="AsyncTask（异步任务）"><a href="#AsyncTask（异步任务）" class="headerlink" title="AsyncTask（异步任务）"></a>AsyncTask（异步任务）</h2><p>AsyncTask是一个抽象类，我们使用它就要定义一个类来继承AsyncTask这个抽象类，并实现其中doInBackgroud方法。</p>
<p>使用时我们为AsyncTask类指定3个泛型参数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public class XXXX extends AsyncTask&lt;Params, Progress, Result&gt;&#123;&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>Params</code> 启动任务时输入的参数类型</li>
<li><code>Progress</code> 后台任务执行中返回给UI线程的执行进度值的类型</li>
<li><code>Result</code> 后台任务完成后返回给UI线程的结果的类型</li>
</ul>
<p>若不指定的话，则都将写成Void，如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AsyncTask &lt;Void, Void, Void&gt;</span><br></pre></td></tr></table></figure>
<p>此外，当我们执行一个异步任务时，其会按照下面4个方法分别执行：</p>
<ul>
<li><code>onPreExecute()</code>：执行后台耗时操作前被调用，并且在UI线程中执行，通常我们在这个方法中完成一些初始化操作，例如弹出ProgressDialog。</li>
<li><code>doInBackground(Params... params)</code>： 这个方法必须重写，在onPreExecute()方法执行完后执行，在这里面实现我们获取数据等一些耗时操作。</li>
<li><code>onProgressUpdate(Progess... values)</code>： 这个方法是在UI线程中执行，在异步任务中，有时候我们需要将执行的进度返回给UI线程，如我们要显示下载一张图片的进度，就可以使用这个方法。在这个方法调用之前，我们需要在doInBackground方法中调用publishProgress(Progress)方法来将进度传递给onProgressUpdate方法来更新。</li>
<li><code>onPostExecute(Result... result)</code>：当doInBackground完成后会将结果返回给这个方法，调用此方法可以更新UI</li>
</ul>
<p>以上方法<code>doInBackground</code>方法必须<code>实现</code>！</p>
<p>在UI线程中调用执行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">new XXXX().execute();</span><br></pre></td></tr></table></figure>
<p>注意：</p>
<ul>
<li>必须在UI线程中创建AsyncTask的实例</li>
<li>必须在UI线程中调用AsyncTask的execute()方法</li>
<li>每个AsyncTask只能被执行一次，多次调用将会引发异常</li>
<li>不要手动的调用onPreExecute(), onPostExecute(Result)，doInBackground(Params…), onProgressUpdate(Progress…)这几个方法</li>
</ul>
<h2 id="AsyncTask问题"><a href="#AsyncTask问题" class="headerlink" title="AsyncTask问题"></a>AsyncTask问题</h2><ul>
<li><p>Activity中创建AsyncTask，当Activity的销毁而AsyncTask会一直执行, 直到doInBackground()方法执行完毕。然后，如果 cancel(boolean)被调用, 那么onCancelled(Result result) 方法会被执行；否则，执行onPostExecute(Result result) 方法。如果我们的Activity销毁之前，没有取消AsyncTask，这有可能让我们的AsyncTask崩溃。因为它想要处理的view已经不存在了。所以，我们总是必须确保在销毁活动之前取消任务</p>
</li>
<li><p>如果AsyncTask被声明为Activity的非静态的内部类，那么AsyncTask会保留一个对创建了AsyncTask的Activity的引用。如果Activity已经被销毁，AsyncTask的后台线程还在执行，它将继续在内存里保留这个引用，导致Activity无法被回收，引起内存泄露</p>
</li>
<li><p>屏幕旋转或Activity在后台被系统杀掉等情况会导致Activity的重新创建，之前运行的AsyncTask会持有一个之前Activity的引用，这个引用已经无效，这时调用onPostExecute()再去更新界面将不再生效</p>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;使用原因&quot;&gt;&lt;a href=&quot;#使用原因&quot; class=&quot;headerlink&quot; title=&quot;使用原因&quot;&gt;&lt;/a&gt;使用原因&lt;/h2&gt;&lt;p&gt;由于android UI主线程是不安全的，如果在子线程中进行更新UI的操作，就会抛出&lt;code&gt;android.view.V
    
    </summary>
    
      <category term="android学习笔记" scheme="http://blog.makerwei.me/categories/android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="android" scheme="http://blog.makerwei.me/tags/android/"/>
    
      <category term="AsyncTask" scheme="http://blog.makerwei.me/tags/AsyncTask/"/>
    
      <category term="异步" scheme="http://blog.makerwei.me/tags/%E5%BC%82%E6%AD%A5/"/>
    
  </entry>
  
  <entry>
    <title>OkHttp基本使用</title>
    <link href="http://blog.makerwei.me/2016/02/26/OkHttp/"/>
    <id>http://blog.makerwei.me/2016/02/26/OkHttp/</id>
    <published>2016-02-26T08:28:19.000Z</published>
    <updated>2016-03-14T07:52:59.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="HTTP-GET"><a href="#HTTP-GET" class="headerlink" title="HTTP GET"></a>HTTP GET</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">OkHttpClient client = new OkHttpClient();</span><br><span class="line">      Request request = new Request.Builder().url(&quot;http://baidu.com&quot;).build();</span><br><span class="line">      client.newCall(request).enqueue(new Callback() &#123;</span><br><span class="line">          @Override</span><br><span class="line">          public void onFailure(Request request, IOException e) &#123;</span><br><span class="line"></span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          @Override</span><br><span class="line">          public void onResponse(Response response) throws IOException &#123;</span><br><span class="line">              //Log.e(TAG, response.body().string());</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;);</span><br></pre></td></tr></table></figure>
<h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><ol>
<li>Request是OkHttp中访问的请求，<code>Builder</code>是辅助类。Response即OkHttp中的响应。</li>
<li>构造一个<code>Request</code>对象，设置好URL，还可以通过<code>Request.Builder</code>设置更多的参数。</li>
<li><code>enqueue</code>是异步的请求，还有execute()方法直接返回Response。</li>
<li><code>response.body()</code>返回ResponseBody类，可以通过string方法得到string类型数据。</li>
<li>onResponse执行的线程<code>并不是UI线程</code>，所以要注意线程间通信问题。</li>
</ol>
<h2 id="HTTP-POST"><a href="#HTTP-POST" class="headerlink" title="HTTP POST"></a>HTTP POST</h2><h3 id="post提交键值对"><a href="#post提交键值对" class="headerlink" title="post提交键值对"></a>post提交键值对</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">OkHttpClient client = new OkHttpClient();</span><br><span class="line">      RequestBody requestBody = new FormEncodingBuilder()</span><br><span class="line">              .add(&quot;name&quot;,&quot;xxx&quot;)</span><br><span class="line">              .add(&quot;ID&quot;,&quot;xxx&quot;)</span><br><span class="line">              .build();</span><br><span class="line">      Request request = new Request.Builder().url(&quot;http://xxxxxxx.com&quot;)</span><br><span class="line">              .post(requestBody)</span><br><span class="line">              .build();</span><br><span class="line">      client.newCall(request).enqueue(new Callback() &#123;</span><br><span class="line">          @Override</span><br><span class="line">          public void onFailure(Request request, IOException e) &#123;</span><br><span class="line"></span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          @Override</span><br><span class="line">          public void onResponse(Response response) throws IOException &#123;</span><br><span class="line">              Log.e(TAG, response.body().string());</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;);</span><br></pre></td></tr></table></figure>
<ol>
<li>先构造RequestBody，通过FormEncodingBuilder添加多个String键值对。</li>
</ol>
<h3 id="post提交Json数据"><a href="#post提交Json数据" class="headerlink" title="post提交Json数据"></a>post提交Json数据</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">final MediaType JSON = MediaType.parse(&quot;application/json; charset=utf-8&quot;);</span><br><span class="line">      OkHttpClient client = new OkHttpClient();</span><br><span class="line">      RequestBody requestBody = RequestBody.create(JSON,json);</span><br><span class="line">      Request request = new Request.Builder().url(&quot;http://xxxxxxx.com&quot;)</span><br><span class="line">              .post(requestBody)</span><br><span class="line">              .build();</span><br><span class="line">      client.newCall(request).enqueue(new Callback() &#123;</span><br><span class="line">          @Override</span><br><span class="line">          public void onFailure(Request request, IOException e) &#123;</span><br><span class="line"></span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          @Override</span><br><span class="line">          public void onResponse(Response response) throws IOException &#123;</span><br><span class="line">              Log.e(TAG, response.body().string());</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;);</span><br></pre></td></tr></table></figure>
<p>具体参考<a href="http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2015/0106/2275.html" target="_blank" rel="external">泡网OkHttp使用教程</a>，<a href="http://www.cnblogs.com/ct2011/p/3997368.html" target="_blank" rel="external">OkHttp使用进阶 译自OkHttp Github官方教程</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;HTTP-GET&quot;&gt;&lt;a href=&quot;#HTTP-GET&quot; class=&quot;headerlink&quot; title=&quot;HTTP GET&quot;&gt;&lt;/a&gt;HTTP GET&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td cl
    
    </summary>
    
      <category term="android学习笔记" scheme="http://blog.makerwei.me/categories/android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="android" scheme="http://blog.makerwei.me/tags/android/"/>
    
      <category term="OkHttp" scheme="http://blog.makerwei.me/tags/OkHttp/"/>
    
  </entry>
  
  <entry>
    <title>Android中Gson解析json数据</title>
    <link href="http://blog.makerwei.me/2016/02/16/gson/"/>
    <id>http://blog.makerwei.me/2016/02/16/gson/</id>
    <published>2016-02-16T12:27:37.000Z</published>
    <updated>2016-03-05T12:39:36.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>JSON(JavaScript Object Notation) 是一种轻量级的数据交换格式。 </p>
<p>JSON对象：对象在js中表示为“{}”括起来的内容，数据结构为 {key：value,key：value,…}的键值对的结构，在面向对象的语言中，key为对象的属性，value为对应的属性值，所以很容易理解，取值方法为 对象.key 获取属性值，这个属性值的类型可以是 数字、字符串、数组、对象几种。</p>
<p>JSON数组：数组在js中是中括号“[]”括起来的内容，数据结构为 [“java”,”javascript”,”vb”,…]，取值方式和所有语言中一样，使用索引获取，字段值的类型可以是 数字、字符串、数组、对象几种。<br>                                    ————百度百科</p>
</blockquote>
<hr>
<p>解析JSON首先要创建JSON数据对应的一个对象，例如假设我们获得数据如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;status&quot;: &quot;error&quot;,</span><br><span class="line">    &quot;UUID&quot;: 123</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>则要创建的类<code>Data.java</code>如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">public class Data &#123;</span><br><span class="line">    private String status;</span><br><span class="line">    private String UUID;</span><br><span class="line"></span><br><span class="line">    public String getStatus() &#123;</span><br><span class="line">        return status;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setStatus(String status) &#123;</span><br><span class="line">        this.status = status;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getUUID() &#123;</span><br><span class="line">        return UUID;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setUUID(String UUID) &#123;</span><br><span class="line">        this.UUID = UUID;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>解析代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">String data = &#123;&quot;status&quot;: &quot;error&quot;,&quot;UUID&quot;: 123&#125;</span><br><span class="line">Gson gon = new Gson();</span><br><span class="line">Data data = gson.fronJson(data,Data.class);</span><br><span class="line">System.out.println(getStatus());</span><br></pre></td></tr></table></figure>
<p>解析多层嵌套JSON，例如<code>Gank.io</code>提供的数据：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;error&quot;: false, </span><br><span class="line">  &quot;results&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;_id&quot;: &quot;56d7b07f6776595ac3e5cf92&quot;, </span><br><span class="line">      &quot;_ns&quot;: &quot;ganhuo&quot;, </span><br><span class="line">      &quot;createdAt&quot;: &quot;2016-03-03T11:33:19.706Z&quot;, </span><br><span class="line">      &quot;desc&quot;: &quot;3.3&quot;, </span><br><span class="line">      &quot;publishedAt&quot;: &quot;2016-03-03T12:12:56.684Z&quot;, </span><br><span class="line">      &quot;source&quot;: &quot;chrome&quot;, </span><br><span class="line">      &quot;type&quot;: &quot;\u798f\u5229&quot;, </span><br><span class="line">      &quot;url&quot;: &quot;http://ww4.sinaimg.cn/large/7a8aed7bjw1f1jionqvz6j20hs0qoq7p.jpg&quot;, </span><br><span class="line">      &quot;used&quot;: true, </span><br><span class="line">      &quot;who&quot;: &quot;\u5f20\u6db5\u5b87&quot;</span><br><span class="line">    &#125;, </span><br><span class="line">    &#123;</span><br><span class="line">      &quot;_id&quot;: &quot;56d6481e6776592a03e624a4&quot;, </span><br><span class="line">      &quot;_ns&quot;: &quot;ganhuo&quot;, </span><br><span class="line">      &quot;createdAt&quot;: &quot;2016-03-02T09:55:42.63Z&quot;, </span><br><span class="line">      &quot;desc&quot;: &quot;3.2&quot;, </span><br><span class="line">      &quot;publishedAt&quot;: &quot;2016-03-02T12:06:37.242Z&quot;, </span><br><span class="line">      &quot;source&quot;: &quot;chrome&quot;, </span><br><span class="line">      &quot;type&quot;: &quot;\u798f\u5229&quot;, </span><br><span class="line">      &quot;url&quot;: &quot;http://ww3.sinaimg.cn/large/7a8aed7bjw1f1ia8qj5qbj20nd0zkmzp.jpg&quot;, </span><br><span class="line">      &quot;used&quot;: true, </span><br><span class="line">      &quot;who&quot;: &quot;\u5f20\u6db5\u5b87&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>创建的实体类Data.java为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br></pre></td><td class="code"><pre><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">import com.google.gson.annotations.Expose;</span><br><span class="line">import com.google.gson.annotations.SerializedName;</span><br><span class="line"></span><br><span class="line">public class Data &#123;</span><br><span class="line"></span><br><span class="line">    @SerializedName(&quot;error&quot;)</span><br><span class="line">    @Expose</span><br><span class="line">    private boolean error;</span><br><span class="line">    @SerializedName(&quot;results&quot;)</span><br><span class="line">    @Expose</span><br><span class="line">    private List&lt;Result&gt; results = new ArrayList&lt;Result&gt;();</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * @return The error</span><br><span class="line">     */</span><br><span class="line">    public boolean isError() &#123;</span><br><span class="line">        return error;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * @param error The error</span><br><span class="line">     */</span><br><span class="line">    public void setError(boolean error) &#123;</span><br><span class="line">        this.error = error;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * @return The results</span><br><span class="line">     */</span><br><span class="line">    public List&lt;Result&gt; getResults() &#123;</span><br><span class="line">        return results;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * @param results The results</span><br><span class="line">     */</span><br><span class="line">    public void setResults(List&lt;Result&gt; results) &#123;</span><br><span class="line">        this.results = results;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static class Result &#123;</span><br><span class="line"></span><br><span class="line">        @SerializedName(&quot;_id&quot;)</span><br><span class="line">        @Expose</span><br><span class="line">        private String Id;</span><br><span class="line">        @SerializedName(&quot;_ns&quot;)</span><br><span class="line">        @Expose</span><br><span class="line">        private String Ns;</span><br><span class="line">        @SerializedName(&quot;createdAt&quot;)</span><br><span class="line">        @Expose</span><br><span class="line">        private String createdAt;</span><br><span class="line">        @SerializedName(&quot;desc&quot;)</span><br><span class="line">        @Expose</span><br><span class="line">        private String desc;</span><br><span class="line">        @SerializedName(&quot;publishedAt&quot;)</span><br><span class="line">        @Expose</span><br><span class="line">        private String publishedAt;</span><br><span class="line">        @SerializedName(&quot;source&quot;)</span><br><span class="line">        @Expose</span><br><span class="line">        private String source;</span><br><span class="line">        @SerializedName(&quot;type&quot;)</span><br><span class="line">        @Expose</span><br><span class="line">        private String type;</span><br><span class="line">        @SerializedName(&quot;url&quot;)</span><br><span class="line">        @Expose</span><br><span class="line">        private String url;</span><br><span class="line">        @SerializedName(&quot;used&quot;)</span><br><span class="line">        @Expose</span><br><span class="line">        private boolean used;</span><br><span class="line">        @SerializedName(&quot;who&quot;)</span><br><span class="line">        @Expose</span><br><span class="line">        private String who;</span><br><span class="line"></span><br><span class="line">        /**</span><br><span class="line">         * @return The Id</span><br><span class="line">         */</span><br><span class="line">        public String getId() &#123;</span><br><span class="line">            return Id;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        /**</span><br><span class="line">         * @param Id The _id</span><br><span class="line">         */</span><br><span class="line">        public void setId(String Id) &#123;</span><br><span class="line">            this.Id = Id;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        /**</span><br><span class="line">         * @return The Ns</span><br><span class="line">         */</span><br><span class="line">        public String getNs() &#123;</span><br><span class="line">            return Ns;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        /**</span><br><span class="line">         * @param Ns The _ns</span><br><span class="line">         */</span><br><span class="line">        public void setNs(String Ns) &#123;</span><br><span class="line">            this.Ns = Ns;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        /**</span><br><span class="line">         * @return The createdAt</span><br><span class="line">         */</span><br><span class="line">        public String getCreatedAt() &#123;</span><br><span class="line">            return createdAt;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        /**</span><br><span class="line">         * @param createdAt The createdAt</span><br><span class="line">         */</span><br><span class="line">        public void setCreatedAt(String createdAt) &#123;</span><br><span class="line">            this.createdAt = createdAt;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        /**</span><br><span class="line">         * @return The desc</span><br><span class="line">         */</span><br><span class="line">        public String getDesc() &#123;</span><br><span class="line">            return desc;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        /**</span><br><span class="line">         * @param desc The desc</span><br><span class="line">         */</span><br><span class="line">        public void setDesc(String desc) &#123;</span><br><span class="line">            this.desc = desc;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        /**</span><br><span class="line">         * @return The publishedAt</span><br><span class="line">         */</span><br><span class="line">        public String getPublishedAt() &#123;</span><br><span class="line">            return publishedAt;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        /**</span><br><span class="line">         * @param publishedAt The publishedAt</span><br><span class="line">         */</span><br><span class="line">        public void setPublishedAt(String publishedAt) &#123;</span><br><span class="line">            this.publishedAt = publishedAt;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        /**</span><br><span class="line">         * @return The source</span><br><span class="line">         */</span><br><span class="line">        public String getSource() &#123;</span><br><span class="line">            return source;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        /**</span><br><span class="line">         * @param source The source</span><br><span class="line">         */</span><br><span class="line">        public void setSource(String source) &#123;</span><br><span class="line">            this.source = source;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        /**</span><br><span class="line">         * @return The type</span><br><span class="line">         */</span><br><span class="line">        public String getType() &#123;</span><br><span class="line">            return type;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        /**</span><br><span class="line">         * @param type The type</span><br><span class="line">         */</span><br><span class="line">        public void setType(String type) &#123;</span><br><span class="line">            this.type = type;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        /**</span><br><span class="line">         * @return The url</span><br><span class="line">         */</span><br><span class="line">        public String getUrl() &#123;</span><br><span class="line">            return url;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        /**</span><br><span class="line">         * @param url The url</span><br><span class="line">         */</span><br><span class="line">        public void setUrl(String url) &#123;</span><br><span class="line">            this.url = url;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        /**</span><br><span class="line">         * @return The used</span><br><span class="line">         */</span><br><span class="line">        public boolean isUsed() &#123;</span><br><span class="line">            return used;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        /**</span><br><span class="line">         * @param used The used</span><br><span class="line">         */</span><br><span class="line">        public void setUsed(boolean used) &#123;</span><br><span class="line">            this.used = used;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        /**</span><br><span class="line">         * @return The who</span><br><span class="line">         */</span><br><span class="line">        public String getWho() &#123;</span><br><span class="line">            return who;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        /**</span><br><span class="line">         * @param who The who</span><br><span class="line">         */</span><br><span class="line">        public void setWho(String who) &#123;</span><br><span class="line">            this.who = who;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>总结：</p>
<p>如果是用[]括起来的部分就是一个List，只用{}就定义为<code>public 类型 名称</code>，对照着数据一层一层的写就是了。</p>
<p><code>http://www.jsonschema2pojo.org/</code>这个网站可以帮你自动生成Gson解析需要的实体类，不过需要翻墙</p>
<p>参考：<a href="http://www.cnblogs.com/jxgxy/p/3677256.html" target="_blank" rel="external">http://www.cnblogs.com/jxgxy/p/3677256.html</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;JSON(JavaScript Object Notation) 是一种轻量级的数据交换格式。 &lt;/p&gt;
&lt;p&gt;JSON对象：对象在js中表示为“{}”括起来的内容，数据结构为 {key：value,key：value,…}的键值对的结构，在面向对
    
    </summary>
    
      <category term="android学习笔记" scheme="http://blog.makerwei.me/categories/android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="android" scheme="http://blog.makerwei.me/tags/android/"/>
    
      <category term="json" scheme="http://blog.makerwei.me/tags/json/"/>
    
      <category term="Gson" scheme="http://blog.makerwei.me/tags/Gson/"/>
    
  </entry>
  
  <entry>
    <title>Mac上 Sublime Text 打造 Latex 中文环境</title>
    <link href="http://blog.makerwei.me/2016/02/05/latex/"/>
    <id>http://blog.makerwei.me/2016/02/05/latex/</id>
    <published>2016-02-05T07:41:13.000Z</published>
    <updated>2016-03-02T13:36:17.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>工欲善其事必先利其器</p>
</blockquote>
<p>这次参加数模美赛，发现写论文时用word时，不是那么得心应手，最后半个小时操作失误出现了一些小问题，不过总算弄好了。所以为了下次不在那么窘迫，同时也是本着瞎折腾的精神，弄起了Latex。</p>
<p>Sublime text 是一款很优秀的编辑器，它不仅体积较小而且运行速度快，把它作为Latex的编辑器最好不过了</p>
<h2 id="安装步骤"><a href="#安装步骤" class="headerlink" title="安装步骤"></a>安装步骤</h2><ol>
<li><p>下载<a href="http://www.tug.org/mactex/" target="_blank" rel="external">MacTex</a>和<a href="http://skim-app.sourceforge.net" target="_blank" rel="external">skim</a>并安装</p>
</li>
<li><p>首先安装Package Control<br> 从菜单 <code>View - Show Console</code> 或者 <code>^ + ~</code> 快捷键，调出 console。在里面输入以下代码</p>
<p> <em>Sublime Text 2</em></p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import urllib2,os,hashlib; h = &apos;2915d1851351e5ee549c20394736b442&apos; + &apos;8bc59f460fa1548d1514676163dafc88&apos;; pf = &apos;Package Control.sublime-package&apos;; ipp = sublime.installed_packages_path(); os.makedirs( ipp ) if not os.path.exists(ipp) else None; urllib2.install_opener( urllib2.build_opener( urllib2.ProxyHandler()) ); by = urllib2.urlopen( &apos;http://packagecontrol.io/&apos; + pf.replace(&apos; &apos;, &apos;%20&apos;)).read(); dh = hashlib.sha256(by).hexdigest(); open( os.path.join( ipp, pf), &apos;wb&apos; ).write(by) if dh == h else None; print(&apos;Error validating download (got %s instead of %s), please try manual install&apos; % (dh, h) if dh != h else &apos;Please restart Sublime Text to finish installation&apos;)</span><br></pre></td></tr></table></figure>
<p> <em>Sublime Text 3</em></p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import urllib.request,os,hashlib; h = &apos;2915d1851351e5ee549c20394736b442&apos; + &apos;8bc59f460fa1548d1514676163dafc88&apos;; pf = &apos;Package Control.sublime-package&apos;; ipp = sublime.installed_packages_path(); urllib.request.install_opener( urllib.request.build_opener( urllib.request.ProxyHandler()) ); by = urllib.request.urlopen( &apos;http://packagecontrol.io/&apos; + pf.replace(&apos; &apos;, &apos;%20&apos;)).read(); dh = hashlib.sha256(by).hexdigest(); print(&apos;Error validating download (got %s instead of %s), please try manual install&apos; % (dh, h)) if dh != h else open(os.path.join( ipp, pf), &apos;wb&apos; ).write(by)</span><br></pre></td></tr></table></figure>
</li>
<li><p>在Sublime Text里用快捷键<code>Command+Shift+P</code>调出命令窗口，输入<code>Install Package</code>，之后选择<code>LaTexTools</code>安装</p>
</li>
<li><p>运行一下Skim，进入<code>选项——同步</code>，在<code>PDF-Tex</code>同步支持那里选择<code>自定义</code>，输入<code>/Applications/Sublime Text.app/Contents/SharedSupport/bin/subl</code>，第二行不变。这样，当你在Sublime Text里修改tex文件时，Skim预览也会相应变更。</p>
</li>
<li><p>中文环境</p>
<p> 打开终端，输入</p>
<pre><code>sudo tlmgr update --self
sudo tlmgr install latexm
</code></pre><p> 然后在Sublime Text的<code>Preferences -- Package Settings —— LaTeXTools —— settings-User</code>重建配置文件,在<code>builder-settings下</code>面新增两项配置：</p>
<pre><code>&quot;program&quot; : &quot;xelatex&quot;,
&quot;command&quot; : [&quot;latexmk&quot;, &quot;-cd&quot;, &quot;-e&quot;, &quot;$pdflatex = &apos;xelatex -interaction=nonstopmode -synctex=1 %S %O&apos;&quot;, &quot;-f&quot;, &quot;-pdf&quot;],
</code></pre></li>
</ol>
<p>另外注意之前应该有<code>&quot;builder&quot;: &quot;default&quot;</code>（或直接设置为空或”traditional”）。</p>
<p>最后新建一个test.tex文件，输入以下测试代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">\documentclass&#123;article&#125;</span><br><span class="line">\usepackage&#123;fontspec, xunicode, xltxtra&#125;  </span><br><span class="line">\setmainfont&#123;Hiragino Sans GB&#125;  </span><br><span class="line"></span><br><span class="line">\title&#123;Title&#125;</span><br><span class="line">\author&#123;&#125;</span><br><span class="line"></span><br><span class="line">\begin&#123;document&#125;</span><br><span class="line"></span><br><span class="line">\maketitle&#123;&#125;</span><br><span class="line"></span><br><span class="line">\section&#123;Introduction&#125;</span><br><span class="line"></span><br><span class="line">This is where you will write your content. 在这里写上内容。</span><br><span class="line"></span><br><span class="line">\end&#123;document&#125;</span><br></pre></td></tr></table></figure>
<p>然后<code>command+B</code>编译，若没出错，就会出现pdf文档</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;工欲善其事必先利其器&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;这次参加数模美赛，发现写论文时用word时，不是那么得心应手，最后半个小时操作失误出现了一些小问题，不过总算弄好了。所以为了下次不在那么窘迫，同时也是本着瞎折腾的精神，弄起了Latex
    
    </summary>
    
      <category term="鼓捣" scheme="http://blog.makerwei.me/categories/%E9%BC%93%E6%8D%A3/"/>
    
    
      <category term="Latex" scheme="http://blog.makerwei.me/tags/Latex/"/>
    
      <category term="mac" scheme="http://blog.makerwei.me/tags/mac/"/>
    
  </entry>
  
  <entry>
    <title>Hexo+github pages/Coding pages搭建自己的blog</title>
    <link href="http://blog.makerwei.me/2016/02/03/hexo/"/>
    <id>http://blog.makerwei.me/2016/02/03/hexo/</id>
    <published>2016-02-03T13:13:25.000Z</published>
    <updated>2016-11-26T14:11:57.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="什么是Hexo？"><a href="#什么是Hexo？" class="headerlink" title="什么是Hexo？"></a>什么是Hexo？</h2><p><code>Hexo</code> 是一个快速、简洁且高效的博客框架。通过它，我们可以快速的搭建自己的bolg并托管到github上。踩了几个坑，我成功的将blog同时部署到github和gitcafe上。</p>
<h2 id="安装Hexo"><a href="#安装Hexo" class="headerlink" title="安装Hexo"></a>安装Hexo</h2><p>检查电脑中是否有以下程序：</p>
<ul>
<li>Node.js</li>
<li>Git</li>
</ul>
<p>安装完以上程序，然后通过<code>npm install -g hexo</code>即安装好Hexo，然后执行以下命令，Hexo会在指定文件夹中新建所需要的文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo init &lt;folder&gt;</span><br><span class="line">cd &lt;folder&gt;</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>
<h2 id="本地预览"><a href="#本地预览" class="headerlink" title="本地预览"></a>本地预览</h2><p>切换到目标文件夹，执行命令<code>hexo generate</code>，则会生成静态文件。输入<code>hexo server</code> 开启本地服务。在浏览器中输入以下网址<code>http://localhost:4000/</code> 则可以在本地预览。</p>
<h2 id="配置github和Coding"><a href="#配置github和Coding" class="headerlink" title="配置github和Coding"></a>配置github和Coding</h2><p>两者用法基本一样，都是新建一个仓库，github上仓库名必须为<code>你的用户名.github.io</code>，Coding上仓库名为你的用户名就行了，但git的分支为<code>coding-pages</code>，然后编辑目标文件里的<code>_config.yml</code>文件如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  - type: git</span><br><span class="line">    repository: https://github.com/Username/Username.github.io.git</span><br><span class="line">    branch: master</span><br><span class="line">  - type: git</span><br><span class="line">    repository: https://git.coding.net/Username/Username.git</span><br><span class="line">    branch: coding-pages</span><br></pre></td></tr></table></figure>
<p>Hexo可以使用多个deployerHe，Hexo会依照顺序执行每个deployer。记住每个冒号后面都有个空格，要不然部署时会报错。执行命令<code>hexo deploy</code>，你就可以在浏览器中输入<code>http://Username.coding.me</code>或者<code>http://Username.github.io</code>就行了。</p>
<p>如果报错为<br><code>ERROR Deployer not found: git</code>，我的情况是执行命令<code>npm install hexo-deployer-git --save</code> 就解决了。</p>
<p>于2016年11月更新</p>
<p>更多资料请参考<a href="https://hexo.io/zh-cn/" target="_blank" rel="external">Hexo官方文档</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;什么是Hexo？&quot;&gt;&lt;a href=&quot;#什么是Hexo？&quot; class=&quot;headerlink&quot; title=&quot;什么是Hexo？&quot;&gt;&lt;/a&gt;什么是Hexo？&lt;/h2&gt;&lt;p&gt;&lt;code&gt;Hexo&lt;/code&gt; 是一个快速、简洁且高效的博客框架。通过它，我们可以快速的
    
    </summary>
    
      <category term="鼓捣" scheme="http://blog.makerwei.me/categories/%E9%BC%93%E6%8D%A3/"/>
    
    
      <category term="hexo" scheme="http://blog.makerwei.me/tags/hexo/"/>
    
      <category term="github pages" scheme="http://blog.makerwei.me/tags/github-pages/"/>
    
  </entry>
  
  <entry>
    <title>Pelican + Github Pages 搭建自己的博客</title>
    <link href="http://blog.makerwei.me/2015/12/02/pelican/"/>
    <id>http://blog.makerwei.me/2015/12/02/pelican/</id>
    <published>2015-12-02T08:13:08.000Z</published>
    <updated>2016-03-02T13:36:17.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="pelican"><a href="#pelican" class="headerlink" title="pelican"></a>pelican</h2><p>Pelican是用python写的一套开源的静态网页生成项目，与当前很火的Jekyll很相似。不过作为一个python爱好者，Pelican更加让我喜欢。它评论使用Disqus，支持Markdown格式，支持代码高亮等功能。之前有使用Wordpress搭过blog。</p>
<h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><p><code>virtualenv</code> 可用来用来建立一个虚拟的python环境，一个专属于项目的python环境。</p>
<h3 id="激活环境"><a href="#激活环境" class="headerlink" title="激活环境"></a>激活环境</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pip install virtualenv</span><br><span class="line">virtualenv myblog</span><br><span class="line">cd myblog</span><br><span class="line">source bin/activate</span><br></pre></td></tr></table></figure>
<h3 id="安装Pelican"><a href="#安装Pelican" class="headerlink" title="安装Pelican"></a>安装Pelican</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/getpelican/pelican.git</span><br><span class="line">cd pelican</span><br><span class="line">python setup.py install</span><br></pre></td></tr></table></figure>
<h3 id="创建blog"><a href="#创建blog" class="headerlink" title="创建blog"></a>创建blog</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd path(your blog&apos;s path)</span><br><span class="line">pelican-quickstart</span><br></pre></td></tr></table></figure>
<p>在回答一系列的问题后就会自动生成你的blog，主要文件如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">path/</span><br><span class="line">|-- content</span><br><span class="line">|-- output</span><br><span class="line">|-- Makefile</span><br><span class="line">|-- develop_server.sh</span><br><span class="line">|-- pelicanconf.py</span><br><span class="line">|-- publishconf.py</span><br></pre></td></tr></table></figure>
<h3 id="写一篇文章"><a href="#写一篇文章" class="headerlink" title="写一篇文章"></a>写一篇文章</h3><p>为了支持<code>Markdown</code>，你首先还要通过<code>pip install Markdown</code> 安装相关的包，然后在content目录下新建一个test.md文件，示例内容如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Title: My super title</span><br><span class="line">Date: 2010-12-03 10:20</span><br><span class="line">Modified: 2010-12-05 19:30</span><br><span class="line">Category: Python</span><br><span class="line">Tags: pelican, publishing</span><br><span class="line">Slug: my-super-post</span><br><span class="line">Authors: Alexis Metaireau, Conan Doyle</span><br><span class="line">Summary: Short version for index and feeds</span><br><span class="line"></span><br><span class="line">This is the content of my super blog post.</span><br></pre></td></tr></table></figure>
<p>然后执行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">make html</span><br><span class="line">./develop_server.sh start</span><br></pre></td></tr></table></figure>
<p>这将开启一个测试服务器，可以通过<code>http://localhost:8000</code>来查看blog的效果</p>
<h3 id="使用Disqus第三方评论"><a href="#使用Disqus第三方评论" class="headerlink" title="使用Disqus第三方评论"></a>使用Disqus第三方评论</h3><p>在<a href="https://disqus.com/" target="_blank" rel="external">Disqus</a>上申请一个站点，然后在<code>pelicanconf.py</code>里添加或修改<code>DISQUS_SITENAME</code>：</p>
<pre><code>DISQUS_SITENAME = u&quot;你的站点ID&quot;
</code></pre><p>然后执行</p>
<pre><code>make html
</code></pre><p>然后刷新<code>http://localhost:8000</code>可以查看效果</p>
<h3 id="主题"><a href="#主题" class="headerlink" title="主题"></a>主题</h3><p>Pelican也有一些主题可以下载，比如使用<a href="https://github.com/alexandrevicenzi/Flex" target="_blank" rel="external">Flex</a>这个主题。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone git://github.com/getpelican/pelican-themes.git</span><br></pre></td></tr></table></figure>
<p>然后将你想要的主题拷贝进你博客项目的目录，然后在<code>pelicanconf.py</code>文件中修改THEME为Flex</p>
<pre><code>THEME = &quot;Flex&quot;
</code></pre><p>然后执行</p>
<pre><code>make html
</code></pre><p>再打开<code>http://localhost:8000</code>查看效果</p>
<h3 id="使用插件"><a href="#使用插件" class="headerlink" title="使用插件"></a>使用插件</h3><p>在博客的目录中执行：</p>
<pre><code>git clone git://github.com/getpelican/pelican-plugins.git
</code></pre><p>以配置<code>sitemap</code>为例，在<code>pelicanconf.py</code>的配置文件里添加以下配置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">SITEMAP = &#123;</span><br><span class="line">  &apos;format&apos;: &apos;xml&apos;,</span><br><span class="line">  &apos;priorities&apos;: &#123;</span><br><span class="line">    &apos;articles&apos;: 1,</span><br><span class="line">    &apos;pages&apos;: 0.9,</span><br><span class="line">    &apos;indexes&apos;: 0.8,</span><br><span class="line">  &#125;,</span><br><span class="line">  &apos;changefreqs&apos;: &#123;</span><br><span class="line">    &apos;indexes&apos;: &apos;daily&apos;,</span><br><span class="line">    &apos;articles&apos;: &apos;daily&apos;,</span><br><span class="line">    &apos;pages&apos;: &apos;weekly&apos;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后再执行<code>make html</code> </p>
<p>打开<code>http://localhost:8000/sitemap.xml</code>就可看到生成的Sitemap了。</p>
<h2 id="Github-Pages"><a href="#Github-Pages" class="headerlink" title="Github Pages"></a>Github Pages</h2><p>创建一个新的repository,并将其命名为<code>username.github.io</code></p>
<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>进入output目录，将生成好的静态HTML文件上传到你的<code>username.github.io</code>中。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cd output</span><br><span class="line">git init</span><br><span class="line">git remote add origin 远端地址</span><br><span class="line">git add .</span><br><span class="line">git commit -m &quot;first commit&quot;</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure>
<p>等待一段时间你就可以访问<code>username.github.io</code>看到网站效果。</p>
<p>若要使用独立域名，则要output当前目录新建一个<code>CNAME</code>文件，里面写入你的域名（域名的指向等设置请自行查阅资料），然后上传到你的repository里就成功了。</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p>更多的配置请参考<a href="http://docs.getpelican.com/en/3.6.3/" target="_blank" rel="external">官方文档</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;pelican&quot;&gt;&lt;a href=&quot;#pelican&quot; class=&quot;headerlink&quot; title=&quot;pelican&quot;&gt;&lt;/a&gt;pelican&lt;/h2&gt;&lt;p&gt;Pelican是用python写的一套开源的静态网页生成项目，与当前很火的Jekyll很相似。不过作
    
    </summary>
    
      <category term="鼓捣" scheme="http://blog.makerwei.me/categories/%E9%BC%93%E6%8D%A3/"/>
    
    
      <category term="Python" scheme="http://blog.makerwei.me/tags/Python/"/>
    
      <category term="pelican" scheme="http://blog.makerwei.me/tags/pelican/"/>
    
      <category term="blog" scheme="http://blog.makerwei.me/tags/blog/"/>
    
  </entry>
  
</feed>
